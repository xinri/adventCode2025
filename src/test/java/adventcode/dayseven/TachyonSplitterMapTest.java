package adventcode.dayseven;

import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

class TachyonSplitterMapTest {

    @Test
    void should_return_21_for_the_example() {
        TachyonSplliterMap tachyonSplliterMap = new TachyonSplliterMap("""
                .......S.......
                ...............
                .......^.......
                ...............
                ......^.^......
                ...............
                .....^.^.^.....
                ...............
                ....^.^...^....
                ...............
                ...^.^...^.^...
                ...............
                ..^...^.....^..
                ...............
                .^.^.^.^.^...^.
                ...............
                """);

        long result = tachyonSplliterMap.numberOfSplit();
        assertThat(result).isEqualTo(21);
    }

    @Test
    void should_return_22_for_the_example() {
        TachyonSplliterMap tachyonSplliterMap = new TachyonSplliterMap("""
                .......S.......
                ...............
                .......^.......
                ...............
                ......^.^......
                ...............
                .....^.^.^.....
                ...............
                ....^.^.^.^....
                ...............
                ...^.^...^.^...
                ...............
                ..^...^.....^..
                ...............
                .^.^.^.^.^...^.
                ...............
                """);

        long result = tachyonSplliterMap.numberOfSplit();
        assertThat(result).isEqualTo(22);
    }

    @Test
    void should_return_column_of_the_first_S() {
        char[][] myCharArray = {
                new char[]{'.', '.', '.', '.', '.', '.', '.', 'S', '.', '.', '.', '.', '.', '.', '.'},
                new char[]{'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'},
                new char[]{'.', '.', '.', '.', '.', '.', '.', '^', '.', '.', '.', '.', '.', '.', '.'}
        };
        TachyonSplliterMap tachyonSplliterMap = new TachyonSplliterMap("");
        int result = tachyonSplliterMap.findStartingPoint(myCharArray);

        assertThat(result).isEqualTo(7);
    }

    @Test
    void should_return_row_of_the_first_splitter() {
        char[][] myCharArray = {
                new char[]{'.', '.', '.', '.', '.', '.', '.', 'S', '.', '.', '.', '.', '.', '.', '.'},
                new char[]{'.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'},
                new char[]{'.', '.', '.', '.', '.', '.', '.', '^', '.', '.', '.', '.', '.', '.', '.'}
        };
        TachyonSplliterMap tachyonSplliterMap = new TachyonSplliterMap("");
        int result = tachyonSplliterMap.findNextSplitterRow(myCharArray, 7);

        assertThat(result).isEqualTo(2);
    }

    @Test
    void should_return_1585_for_the_real_example() {
        TachyonSplliterMap tachyonSplliterMap = new TachyonSplliterMap("""
                ......................................................................S......................................................................
                .............................................................................................................................................
                ......................................................................^......................................................................
                .............................................................................................................................................
                .....................................................................^.^.....................................................................
                .............................................................................................................................................
                ....................................................................^.^.^....................................................................
                .............................................................................................................................................
                ...................................................................^.^...^...................................................................
                .............................................................................................................................................
                ..................................................................^.^.^.^.^..................................................................
                .............................................................................................................................................
                .................................................................^.^.^...^.^.................................................................
                .............................................................................................................................................
                ................................................................^.^.^...^.^.^................................................................
                .............................................................................................................................................
                ...............................................................^...^...^.^.^.^...............................................................
                .............................................................................................................................................
                ..............................................................^.^.^...^...^.^.^..............................................................
                .............................................................................................................................................
                .............................................................^.^.^...^.^...^.^.^.............................................................
                .............................................................................................................................................
                ............................................................^.....^.^.^.^.^.^.^.^............................................................
                .............................................................................................................................................
                ...........................................................^...^.^...^.^...^...^.^...........................................................
                .............................................................................................................................................
                ..........................................................^.^.^.^.^...^...^.^.....^..........................................................
                .............................................................................................................................................
                .........................................................^.^.^...^.^.^...^...^.....^.........................................................
                .............................................................................................................................................
                ........................................................^.^.....^.^.^.^.^.^.^.^.^...^........................................................
                .............................................................................................................................................
                .......................................................^...^.^.^.^.^...^...^.^...^.^.^.......................................................
                .............................................................................................................................................
                ......................................................^.^.^.^...^.......^...^.....^.^.^......................................................
                .............................................................................................................................................
                .....................................................^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.^.....................................................
                .............................................................................................................................................
                ....................................................^.^.^.....^...^.^.^.^.^.^.^.^.^.^.^.^....................................................
                .............................................................................................................................................
                ...................................................^.^.....^.^.^...^...^.^.^.^...^.......^...................................................
                .............................................................................................................................................
                ..................................................^...^.......^.....^...^.^.^.^.^.^...^...^..................................................
                .............................................................................................................................................
                .................................................^.^.^.....^.^.^.^...^.^...^.^.^.^.^...^.^.^.................................................
                .............................................................................................................................................
                ................................................^.^.^...^.^...^.^.......^...^...^.^.^.^.^.^.^................................................
                .............................................................................................................................................
                ...............................................^.........^...^.^.......^.....^.^.^...^.^.^.^.^...............................................
                .............................................................................................................................................
                ..............................................^.^.^.^.^.^...^.^.....^...^.^.^...^...^.^...^.^.^..............................................
                .............................................................................................................................................
                .............................................^...^.^.^.......^.....^.^.^.^...^.^.....^.^.....^.^.............................................
                .............................................................................................................................................
                ............................................^...^...^.^.^...^...^.^.^...^...^.....^.^.^.^.^.^.^.^............................................
                .............................................................................................................................................
                ...........................................^.....^...^.....^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...........................................
                .............................................................................................................................................
                ..........................................^.^.^...^...^.^.....^...^.......^.^...^.^.^.^...^.^...^.^..........................................
                .............................................................................................................................................
                .........................................^.^.^...^...^.^.^.^...^.^...^.^.^.^...^.....^.^.^.^.^...^.^.........................................
                .............................................................................................................................................
                ........................................^.^.^...^...^.^.^.^.....^.^.......^.....^...^.^.^.^.^.....^.^........................................
                .............................................................................................................................................
                .......................................^.^.^...^.^.^...^.^.^.^.^.^...^.^...^.^.^.........^.^.^.....^.^.......................................
                .............................................................................................................................................
                ......................................^.^.^...^.....^.^.^.^.....^...^.......^.^.....^.^.^...^...^...^.^......................................
                .............................................................................................................................................
                .....................................^.^.^.^...^.....^.....^.^.^.^.....^.^.^.....^.^...............^...^.....................................
                .............................................................................................................................................
                ....................................^.^.^.^.....^.^.^...^...^.....^.^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^....................................
                .............................................................................................................................................
                ...................................^...^.^...^.....^.^...^...^.^.^.^...^...^.....^.....^.^...^.^.^...^.^.^...................................
                .............................................................................................................................................
                ..................................^.^.^.^.......^...^.^.^.^...^.....^.^...^.^.^...^.^.^.^.^.^.^...^.^...^.^..................................
                .............................................................................................................................................
                .................................^.....^.^.^.....^.....^.^.^.^.^.^...^.........^.^.^.^.^.....^...^.^.^.^...^.................................
                .............................................................................................................................................
                ................................^.^.^.^.^.^.^.^...^.^.......^.^.....^.^.^.^...^...^.^.^.......^...^.......^.^................................
                .............................................................................................................................................
                ...............................^.^...^.^...^...^.^.^.^.^...^.^...^.^...^...^...^...^.^.^.^.^.^...^...^.^...^.^...............................
                .............................................................................................................................................
                ..............................^.^...^.^...^...^...^.^.^.^...^...^.^.....^.^...^.^.^...^.^.^.^...^.^.^.^.^.^.^.^..............................
                .............................................................................................................................................
                .............................^.^.........^.^.^.....^.^.^...^.^.^.^.^.^.^...^...^.^...^...^.^.....^.^.^.^.^.^.^.^.............................
                .............................................................................................................................................
                ............................^.^.^...^...^.^.....^.......^...^.^...^...^.^.....^...^.^.....^.^.^...^.^.^.^.^.....^............................
                .............................................................................................................................................
                ...........................^.^.^...^.^...^.^.^...^.^.^.^.^...^.^.^...^.^.^.^.....^...^...^.^...^...^.^.^...^.^.^.^...........................
                .............................................................................................................................................
                ..........................^...^.......^.^.^.^.^.....^.^.....^.^.^.^.^.^...^.^.......^.^...^.^.^...^...^...^.^.^...^..........................
                .............................................................................................................................................
                .........................^.^.^.^.^...^...^.^.^.^...^.^...^...^...^.^.^.^.^.^.....^...^.^.^.^.^.^.^.....^.^.^.^.....^.........................
                .............................................................................................................................................
                ........................^.^...^.^.^.^.^.^.....^.^.^.^.^...^.^.^...^.^.....^.^.....^...^.....^.^.^.^.^.^.^.^.^.....^.^........................
                .............................................................................................................................................
                .......................^.^.^.^.....^.^.....^.^...^.^...........^.^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.......................
                .............................................................................................................................................
                ......................^.^.^...^.^...^.^.^.^.^.^.........^.....^.^.....^.^.^.^...^...^...^.^.^.^.^.^.^...^.^.......^.^.^......................
                .............................................................................................................................................
                .....................^.^.^...^.^...^...^.....^.^.^...^.^.^...^.^...^...^...^.^.^.^.^...^.^...^.^.^...^...^.^.^.^.^.....^.....................
                .............................................................................................................................................
                ....................^.^.....^.....^.^.^.^.^.^.^.^.^.^...^...^.^.....^.^.^.^...^...^...^.^.^.^.^...^.^.....^.^...^...^.^.^....................
                .............................................................................................................................................
                ...................^.^...^...^...^.^.........^...^.^...^...^.^.^.^.^.^.^.^.^.^.^...^.^...^...^.^.^.^.^...^...^.^.^.^...^.^...................
                .............................................................................................................................................
                ..................^.^.....^.^.^.....^...^.^.^.^.^.^...^.^.....^.^...^...^.^.^...^.^...^.^.^.^.^...^...^.^...^.^.^.^.^...^.^..................
                .............................................................................................................................................
                .................^...^.^...^.^.^...^.....^.^.^.^...^...^...^.^...^.^.^.^.^.^.^.^...^.^.^.^.^.....^...^.^...^...^.^...^.^...^.................
                .............................................................................................................................................
                ................^.......^.^.^...^.^.....^.^.....^...^...^.........^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^...^.^...^...^.^.^.^.^................
                .............................................................................................................................................
                ...............^.^.^.^...^.^...^.^.^.^.......^.^.....^.^.^.^.^.^.^.^.^.....^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^...^...^.^...............
                .............................................................................................................................................
                ..............^.^.....^...^...^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.....^.^.^...^.....^...^.^.^.^.^.^.^.^.^...^.^.^.^.^.^...^..............
                .............................................................................................................................................
                .............^.^.^.^.^.^.....^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^...^.^.......^...^.^.^.^.....^.^.^.^.^.^.^.....^.^.^.^.............
                .............................................................................................................................................
                ............^...^...^.^.^.......^.^.^...^...^...^.^.^.^...^.^.^.^.....^...^...^.^.^.^.^.^.^.^...^.^.^.^.^.^...^.^.....^.^...^.^.^............
                .............................................................................................................................................
                ...........^.^.......^.^.^.^.......^.^.^...^...^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^.....^.^...^.^.^.....^.^.^.^...^.^...^.^.^...^.^...........
                .............................................................................................................................................
                ..........^.^...^...^.....^.^.......^.^.^.^.^.^.^.^.^.^...^.^.^.^.....^...^.^.....^.^.^...^.^.....^.......^...^.^.^...^.^.^.^.^.^.^..........
                .............................................................................................................................................
                .........^...^.^.^.^.......^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.......^.^.^...^.^...^.^...^.....^...^.^.^...^.....^.^...^.^.^.^.........
                .............................................................................................................................................
                ........^.^.......^.^.^.^.^.^...^.....^...^.......^.^.^.^...^.^...^.....^.....^.^.....^.^.^.......^.^.^.^.^.....^...^.^...^.^.^.^.^.^........
                .............................................................................................................................................
                .......^.^.^.^.......^.^.^...^.^.^.^.^.^...^.^.^...^.^.^.^...^.^.^.^.^.^...^.^...........^.^...^.^...^.^.....^.^.^.......^.^.^...^.^.^.......
                .............................................................................................................................................
                ......^.^...^.^...^.^.^.^.....^...^.^...^.....^.^...^.^.^.....^.^.^.........^.....^.^.....^.^.^.^.^.^...^.^.^...^...^.....^.^.^.^.^.^.^......
                .............................................................................................................................................
                .....^.^.....^.^.^.^.^.^.^...^.^...^...^...^.^.^.....^.^...^.....^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.....^.^.^.^.....^.^...^.^.^...^.....
                .............................................................................................................................................
                ....^.^...^.^...^.^.^.^.^.^.^.^.....^...^.......^.^.^.^.^...^.......^.^.^.^.......^.............^.^.^.^.^.^.^...^.^.^.^.....^.^.^.^.....^....
                .............................................................................................................................................
                ...^.^.^.^.^.^.^.^.^.^.^.^...^...^.^...^...^.^.^.^...^.^.^.^.^.^.^...^.^.^...^.....^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.....^.^...^.....^.^...
                .............................................................................................................................................
                ..^...^.^.^.^.^...^.^.^.^...^...^...^.^.....^...^.....^.^.....^.^.^...^.^.^...^.^...^...^...^.^.^...^.^...^.^.....^.^...^.^.....^...^...^.^..
                .............................................................................................................................................
                .^.^.......^...^.^...^.^...^.^...^.^.^.^.^.........^.^.......^.^.^.......^.^.^.^.^.^...^.^...^.^.......^.....^.^.^.^.^.^.^.^...^...^.^...^.^.
                .............................................................................................................................................
                """);

        long result = tachyonSplliterMap.numberOfSplit();
        assertThat(result).isEqualTo(1585L);
    }
}